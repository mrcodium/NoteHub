@import url("https://fonts.googleapis.com/css2?family=Audiowide&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap");

@tailwind base;
@tailwind components;
@tailwind utilities;

.hide-scrollbar::-webkit-scrollbar {
  display: none;
}

.katex-display::-webkit-scrollbar {
  width: 3px;
  height: 3px;
  display: none;
}
.katex-display {
  overflow-x: auto;
  overflow-y: hidden;
  max-width: 100%;
  padding: 0.2rem;
  margin-top: 0.5rem !important;
  margin-bottom: 0.5rem !important;
}

div[role="menu"] {
  @apply bg-popover text-popover-foreground rounded-xl p-1.5 shadow-md overflow-y-auto overflow-x-hidden border min-w-[8rem] z-50;
}
div[role="menuitem"] {
  @apply relative flex cursor-pointer items-center gap-2 rounded-xl px-3 h-10 py-2 text-sm outline-none select-none hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground;
}
.button {
  @apply inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 bg-primary text-primary-foreground shadow hover:bg-primary/90 h-9 px-4 py-2;
}

.button.disabled {
  @apply opacity-50 pointer-events-none;
}

input[type="password"]::-ms-reveal,
input[type="password"]::-webkit-credentials-auto-fill-button {
  display: none;
}

.scrollbar-sm::-webkit-scrollbar {
  @apply w-1 h-1;
}
body *::-webkit-scrollbar {
  @apply w-2 h-2;
}

body *::-webkit-scrollbar-track {
  @apply bg-accent;
}
body *::-webkit-scrollbar-thumb {
  @apply bg-muted-foreground/50;
}
@media (max-width: 640px) {
  body *::-webkit-scrollbar {
    width: 4px;
    height: 4px;
  }
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  overflow: hidden;
  -webkit-line-clamp: 2;
  line-clamp: 2;
}

.ProseMirror {
  white-space: pre-wrap;
}
.ProseMirror code {
  tab-size: 4;
  -moz-tab-size: 4;
}

.tiptap .pre-wrapper {
  @apply rounded-2xl overflow-hidden my-4;
}
.tiptap pre {
  white-space: pre;
  overflow-x: auto;
  tab-size: 4;
}
.node-codeBlock {
  @apply my-4;
}

div:has(> .tiptap.ProseMirror) {
  flex: 1;
  overflow-y: auto;
}

.tiptap.ProseMirror {
  @apply max-w-screen-md;
}


.tiptap {
  tab-size: 4;
  @apply p-4;
  /* @apply relative whitespace-pre-wrap w-full border-none outline-none mx-auto bg-background text-foreground font-sans leading-relaxed overflow-x-hidden p-4; */

  img {
    @apply max-h-[50vh] my-4 rounded-xl;
  }
  .code-block {
    @apply relative;

    select {
      @apply absolute bg-white right-[0.5rem] left-[0.5rem];
      position: absolute;
      background-color: var(--white);
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="Black" d="M7 10l5 5 5-5z"/></svg>');
      right: 0.5rem;
      top: 0.5rem;
    }
  }
  li {
    margin-bottom: 8px;
  }
  ul[data-type="taskList"] {
    list-style: none;
    margin-left: 0;
    padding: 0;

    li[data-checked="true"] p {
      @apply text-muted-foreground line-through;
    }

    li[data-checked="true"] input[type="checkbox"] {
      @apply bg-primary;
    }
    li[data-checked="true"] input[type="checkbox"]::before {
      content: "";
      position: absolute;
      inset: 0;

      background-color: hsl(var(--primary-foreground));

      -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg>')
        center / contain no-repeat;

      mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"/></svg>')
        center / contain no-repeat;
    }

    input[type="checkbox"] {
      @apply cursor-pointer mt-1.5 overflow-hidden relative appearance-none w-4 h-4 border border-primary rounded-sm;
    }

    li {
      @apply flex items-start;

      p {
        @apply font-semibold;
      }
      > label {
        flex: 0 0 auto;
        margin-right: 0.5rem;
        user-select: none;
      }

      > div {
        flex: 1 1 auto;
      }
    }

    /* styles.css */

    ul[data-type="taskList"] {
      margin: 0;
    }
  }

  h1 {
    @apply text-[2rem] font-semibold mb-8 leading-snug;
  }

  h2 {
    @apply text-[1.57rem] font-semibold mt-8 mb-4 leading-snug;
  }

  h3 {
    @apply text-[1.35rem] font-semibold mt-6 mb-2 leading-snug;
  }

  h4 {
    @apply text-base font-semibold mt-4 mb-2;
  }

  h5 {
    @apply text-base font-semibold m-0;
  }

  h6 {
    @apply text-base font-semibold m-0;
  }

  p {
    @apply mb-2 leading-[1.75] dark:text-muted-foreground;
  }
  p:not(:first-child) {
    @apply mt-2;
  }

  a {
    @apply dark:text-[#7ab7ff] dark:hover:text-[#5e83b3] text-[#2964aa] hover:text-[#749ac8] no-underline;
  }

  ul {
    @apply list-disc;
  }
  ol {
    @apply list-decimal;
  }
  li::marker {
    @apply font-bold;
  }

  ol,
  ul {
    @apply mb-4 pl-[26px];
  }

  p + :where(ol, ul) {
    @apply mt-0;
  }

  :is(h1, h2, h3, h4, h5, h6, p) code {
    @apply font-mono bg-black/10 dark:bg-accent/50 py-[2.4px] px-[4.8px] rounded whitespace-pre-wrap;
  }

  pre {
    @apply bg-input/30 text-primary dark:text-primary p-4 overflow-x-auto;

    code {
      @apply whitespace-nowrap p-0 leading-relaxed;
    }

    code {
      white-space: pre !important;
    }
  }

  blockquote {
    @apply border-l-4 my-4  py-2 pl-6 italic  text-muted-foreground bg-accent/30;
  }

  hr {
    @apply border my-12;
  }

  /* Table-specific styling */
  table {
    @apply w-full mb-6 border-collapse overflow-hidden;

    /* let it auto-expand */
    table-layout: auto;
    border-collapse: collapse;
    margin: 0;

    /* allow natural growth based on content */
    /* width: auto !important; */
  }
  tr:not(:last-child) {
    @apply border-b;
  }

  td,
  th {
    @apply p-2;
    @apply whitespace-nowrap; /* prevent line-break */
    position: relative;

    > * {
      margin-bottom: 0;
    }
  }

  th {
    @apply bg-accent/70 font-semibold text-left;
  }

  td {
    @apply bg-background;
  }

  .selectedCell:after {
    background: var(--gray-2);
    content: "";
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    pointer-events: none;
    position: absolute;
    z-index: 2;
  }

  .column-resize-handle {
    @apply bg-accent -bottom-[2px] -right-[2px] top-0 absolute w-1 z-10;
  }

  .tableWrapper {
    margin: 1.5rem 0;
    overflow-x: auto;
  }

  .tableWrapper {
    margin: 1.5rem 0;
    overflow-x: auto;
  }

  &.resize-cursor {
    cursor: ew-resize;
    cursor: col-resize;
  }

  :is(p, h1, h2, h3, h4, h5, h6, ul, ol, blockquote).is-editor-empty::before,
  :is(p, h1, h2, h3, h4, h5, h6, ul, ol, blockquote).is-empty::before {
    @apply text-muted-foreground/40 float-left h-0 pointer-events-none;
    content: attr(data-placeholder);
  }
}

.tippy-arrow::before {
  @apply hidden;
}
.tippy-content {
  @apply bg-popover text-popover-foreground border shadow-md rounded-lg p-1 max-h-[300px] overflow-y-auto;
  padding: 4px !important;
}
.tippy-box {
  width: 256px;
  overflow: hidden !important;
  background-color: transparent !important;
  padding: 0 !important;
}
.tippy-content::-webkit-scrollbar {
  @apply w-1 h-1;
}

/* Mathematics extension styles */
.tiptap .tiptap-mathematics-render {
  padding: 0 0.25rem;
  border-radius: 0.25rem;
}

.tiptap .tiptap-mathematics-render--editable {
  cursor: pointer;
  transition: background 0.2s;
}

.tiptap .tiptap-mathematics-render--editable:hover {
  @apply bg-muted;
}

.tiptap .tiptap-mathematics-render[data-type="inline-math"] {
  display: inline-block;
}

.tiptap .tiptap-mathematics-render[data-type="block-math"] {
  @apply block my-4 p-4 text-center;
}

.tiptap .tiptap-mathematics-render.inline-math-error,
.tiptap .tiptap-mathematics-render.block-math-error {
  @apply bg-destructive/10 text-destructive border-destructive/50 p-2 rounded-sm;
}
